"use strict";(self.webpackChunkcours_project=self.webpackChunkcours_project||[]).push([[991],{666:(e,i,t)=>{t.d(i,{Z5:()=>c,HY:()=>l});const n=JSON.parse('{"J":{"fps":25,"container":"mp4","codec":"h264","maxSize":400,"allowedDurations":[15,30]},"m":[{"id":1,"name":"\u041c\u043e\u0441\u043a\u0432\u0430, \u043c\u0435\u0436\u044d\u0442\u0430\u0436\u043a\u0430","width":8192,"height":1056,"nightVersion":false},{"id":2,"name":"\u041b\u0438\u0444\u0442\u044b","width":2944,"height":320,"nightVersion":false},{"id":3,"name":"\u041b\u0438\u0444\u0442\u044b","width":256,"height":512,"nightVersion":false},{"id":4,"name":"\u041b\u0438\u0444\u0442\u044b","width":384,"height":512,"nightVersion":false},{"id":5,"name":"\u041b\u0438\u0444\u0442\u044b","width":512,"height":512,"nightVersion":false},{"id":6,"name":"\u041c\u043e\u0441\u043a\u0432\u0430, \u043a\u043e\u043b\u043e\u043d\u043d\u044b","width":768,"height":896,"nightVersion":false},{"id":7,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 6 \u0438 7 \u044d\u0442.)","width":1792,"height":256,"nightVersion":false},{"id":8,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 5 \u0438 6 \u044d\u0442.)","width":2048,"height":192,"nightVersion":false},{"id":9,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 4 \u0438 5 \u044d\u0442., \u043f\u0430\u0440\u043a\u043e\u0432\u043a\u0430)","width":2048,"height":384,"nightVersion":false},{"id":10,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 4 \u0438 5 \u044d\u0442.)","width":1792,"height":384,"nightVersion":false},{"id":11,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 3 \u0438 4 \u044d\u0442.)","width":2048,"height":320,"nightVersion":false},{"id":12,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 2 \u0438 3 \u044d\u0442.)","width":2048,"height":320,"nightVersion":false},{"id":13,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 1 \u0438 2 \u044d\u0442.)","width":2048,"height":384,"nightVersion":false},{"id":14,"name":"\u041c\u0435\u0436\u044d\u0442. \u0443 \u044d\u0441\u043a\u0430\u043b\u0430\u0442\u043e\u0440\u043e\u0432 (\u043c\u0435\u0436\u0434\u0443 0 \u0438 1 \u044d\u0442.)","width":2048,"height":320,"nightVersion":false},{"id":15,"name":"\u0411\u0435\u0440\u043b\u0438\u043d, \u043c\u0435\u0436\u044d\u0442\u0430\u0436\u043a\u0430 (1, 2 \u044d\u0442\u0430\u0436\u0438)","width":7168,"height":384,"nightVersion":false},{"id":16,"name":"\u0411\u0435\u0440\u043b\u0438\u043d, \u043c\u0435\u0436\u044d\u0442\u0430\u0436\u043a\u0430 (3 \u044d\u0442\u0430\u0436)","width":8320,"height":320,"nightVersion":false},{"id":17,"name":"\u041f\u0430\u0440\u0438\u0436, \u043c\u0435\u0436\u044d\u0442\u0430\u0436\u043a\u0430","width":3840,"height":352,"nightVersion":false},{"id":18,"name":"\u041f\u0430\u0440\u0438\u0436, \u043d\u0430\u043f\u043e\u043b\u044c\u043d\u044b\u0435 (\u043d\u0430\u0440\u0443\u0436\u043d\u044b\u0435)","width":3840,"height":704,"nightVersion":false},{"id":19,"name":"\u041f\u0430\u0440\u0438\u0436, \u043d\u0430\u043f\u043e\u043b\u044c\u043d\u044b\u0435 (\u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435)","width":3840,"height":800,"nightVersion":false},{"id":20,"name":"\u0412\u0445\u043e\u0434 \u21163, \u0442\u0430\u043c\u0431\u0443\u0440","width":2176,"height":1108,"nightVersion":false},{"id":21,"name":"Full HD (\u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u043d\u0443)","width":1920,"height":1080,"nightVersion":false},{"id":22,"name":"\u0424\u0430\u0441\u0430\u0434\u044b (4 \u0448\u0442. \u043d\u0430 \u0414\u043e\u0440\u043e\u0433\u043e\u043c\u0438\u043b\u043e\u0432\u0441\u043a\u043e\u0439)","width":1152,"height":792,"nightVersion":true},{"id":23,"name":"\u0424\u0430\u0441\u0430\u0434\u044b (\u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u0430 \u0414\u043e\u0440\u043e\u0433\u043e\u043c\u0438\u043b\u043e\u0432\u0441\u043a\u043e\u0439)","width":1216,"height":896,"nightVersion":true},{"id":24,"name":"\u0424\u0430\u0441\u0430\u0434\u044b (3 \u0448\u0442. \u043d\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u0438 \u0415\u0432\u0440\u0430\u0437\u0438\u0438)","width":576,"height":544,"nightVersion":true},{"id":25,"name":"\u0412\u0445\u043e\u0434 \u21161, \u043b\u0435\u0432\u044b\u0439","width":520,"height":200,"nightVersion":true},{"id":26,"name":"\u0412\u0445\u043e\u0434 \u21161, \u043f\u0440\u0430\u0432\u044b\u0439","width":560,"height":200,"nightVersion":true},{"id":27,"name":"\u0412\u0445\u043e\u0434 \u21162","width":840,"height":200,"nightVersion":true},{"id":28,"name":"\u0412\u0445\u043e\u0434 \u21163","width":1160,"height":240,"nightVersion":false},{"id":29,"name":"\u0412\u0445\u043e\u0434 \u21164","width":1240,"height":240,"nightVersion":false},{"id":30,"name":"\u0412\u0445\u043e\u0434 \u21165","width":1040,"height":280,"nightVersion":false},{"id":31,"name":"\u0412\u0438\u0442\u0440\u0438\u043d\u0430 \u0443 \u0432\u0445\u043e\u0434\u0430 \u21161","width":360,"height":216,"nightVersion":true},{"id":32,"name":"\u0412\u0438\u0442\u0440\u0438\u043d\u0430 \u0443 \u0432\u0445\u043e\u0434\u0430 \u21162","width":350,"height":144,"nightVersion":true},{"id":33,"name":"\u0411\u0435\u0440\u043b\u0438\u043d, \u043d\u0430\u043f\u043e\u043b\u044c\u043d\u044b\u0439, 2 \u044d\u0442.","width":2048,"height":1408,"nightVersion":false},{"id":34,"name":"\u042d\u043a\u0440\u0430\u043d \u043d\u0430\u0434 \u0432\u044b\u0445\u043e\u0434\u043e\u043c \u21163","width":4480,"height":640,"nightVersion":false}]}'),a=JSON.parse('{"fn":"https://landless-serpentinely-amari.ngrok-free.dev","Hr":{"vq":"/api/validate-video"},"xU":true}'),r=n.J,s=n.m,o=1024*r.maxSize*1024,l=async e=>{try{const h=await(e=>new Promise((i,t)=>{const n=e.size<=o,a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=()=>{window.URL.revokeObjectURL(a.src);const t=Math.round(a.duration),o=a.videoWidth,l=a.videoHeight,c=r.allowedDurations.includes(t),d=s.find(e=>e.width===o&&e.height===l),h=void 0!==d,f={isValid:n&&c&&h,fileSize:e.size,fileSizeValid:n,duration:t,durationValid:c,width:o,height:l,resolutionValid:h,fileName:e.name,fileType:e.type,matchingScreen:d||null};i(f)},a.onerror=()=>{t(new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"))},a.src=URL.createObjectURL(e)}))(e),f=e.name.split(".").pop().toLowerCase(),m=f===r.container,u=h.matchingScreen?"".concat(h.matchingScreen.name).concat(h.matchingScreen.nightVersion?" (\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u043e\u0447\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f)":""):"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u044d\u043a\u0440\u0430\u043d",g=await(async e=>{if(!a.xU)return null;try{const i=new FormData;i.append("file",e);const t=await fetch("".concat(a.fn).concat(a.Hr.vq),{method:"POST",body:i,headers:{"ngrok-skip-browser-warning":"true"}});return t.ok?await t.json():(console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435:",t.status),null)}catch(i){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:",i),null}})(e);let p=r.codec.toUpperCase(),v="success",w=r.fps.toString(),x="success",V=h.isValid&&m;var i,t,n;if(g)if(p=(null===(i=g.video_info)||void 0===i?void 0:i.codec)||p,w=(null===(t=g.video_info)||void 0===t||null===(n=t.fps)||void 0===n?void 0:n.toString())||w,void 0!==g.is_valid){var l,c,d;const e=(null===(l=g.video_info)||void 0===l||null===(c=l.codec)||void 0===c?void 0:c.toLowerCase())===r.codec.toLowerCase(),i=Math.abs(parseFloat((null===(d=g.video_info)||void 0===d?void 0:d.fps)||0)-r.fps)<.1;v=e?"success":"error",x=i?"success":"error",V=h.isValid&&m&&e&&i}return{duration:"".concat(h.duration," \u0441\u0435\u043a\u0443\u043d\u0434"),durationStatus:h.durationValid?"success":"error",container:".".concat(f),containerStatus:m?"success":"error",codec:p,codecStatus:v,fps:w,fpsStatus:x,resolution:"".concat(h.width,"x").concat(h.height," px"),resolutionStatus:h.resolutionValid?"success":"error",fileSize:h.fileSize,fileSizeValid:h.fileSizeValid,containerValid:m,isValid:V,screenInfo:u,matchingScreen:h.matchingScreen,serverValidation:g}}catch(h){throw console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0445:",h),h}},c=()=>({maxFileSize:o,maxFileSizeMB:r.maxSize,allowedDurations:r.allowedDurations,allowedFormats:["video/".concat(r.container)],allowedContainers:[r.container],fps:r.fps,codec:r.codec})},991:(e,i,t)=>{t.r(i),t.d(i,{default:()=>g});var n,a,r=t(43),s=t(833);const o=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},l.apply(null,arguments)}function c(e,i){let{title:t,titleId:s}=e,c=function(e,i){if(null==e)return{};var t,n,a=function(e,i){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==i.indexOf(n))continue;t[n]=e[n]}return t}(e,i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],-1===i.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,o);return r.createElement("svg",l({width:48,height:62,viewBox:"0 0 48 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":s},c),t?r.createElement("title",{id:s},t):null,n||(n=r.createElement("path",{d:"M30.7667 1.63518L46.299 17.8839V54.2442C46.299 54.2442 46.5693 59.9016 38.5328 59.9016H7.87378C7.87378 59.9016 1.5 60.351 1.5 51.2838V10.0434C1.5 8.45506 1.83795 6.8802 2.55441 5.46418C3.53447 3.53785 5.37969 1.5 8.81667 1.5C15.3256 1.5 30.7667 1.63518 30.7667 1.63518Z",stroke:"white",strokeWidth:3,strokeMiterlimit:10})),a||(a=r.createElement("path",{d:"M30.7156 2.48389V10.9564C30.7156 12.5278 31.0569 14.0926 31.7835 15.4883C32.7467 17.3437 34.5311 19.3072 37.7653 19.3072H45.7342",stroke:"white",strokeWidth:3,strokeMiterlimit:10})))}const d=r.forwardRef(c);t.p;var h=t(666),f=t(579);const m=(e,i)=>{let t=e.startsWith("#")?e.slice(1):e;3===t.length&&(t=t.split("").map(e=>e+e).join(""));const n=parseInt(t,16);let a=n>>16&255,r=n>>8&255,s=255&n;return a=Math.max(0,Math.min(255,Math.floor(a*(1-i)))),r=Math.max(0,Math.min(255,Math.floor(r*(1-i)))),s=Math.max(0,Math.min(255,Math.floor(s*(1-i)))),"#"+((1<<24)+(a<<16)+(r<<8)+s).toString(16).slice(1).toUpperCase()},u=e=>{let{color:i="#5227FF",size:t=1,className:n="",onClick:a}=e;const[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(Array.from({length:3},()=>({x:0,y:0}))),[d,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("videoHistory");if(e){const i=JSON.parse(e).slice(0,3);h(i),console.log("Folder: \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e \u043f\u0440\u0435\u0432\u044c\u044e:",i.length)}else h([])}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0440\u0435\u0432\u044c\u044e \u0432 Folder:",e),h([])}};e();const i=i=>{"videoHistory"===i.key&&e()};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}},[]);const u=m(i,.08),g=m("#ffffff",.1),p=m("#ffffff",.05),v={"--folder-color":i,"--folder-back-color":u,"--paper-1":g,"--paper-2":p,"--paper-3":"#ffffff"},w="folder ".concat(s?"open":"").trim(),x={transform:"scale(".concat(t,")")},V=e=>{const i=d[e];return i?(0,f.jsx)("div",{className:"paper-content",children:i.thumbnail?(0,f.jsx)("img",{src:i.thumbnail,alt:i.fileName,className:"paper-full-thumbnail"}):(0,f.jsx)("div",{className:"paper-no-thumbnail",children:"\u041d\u0435\u0442 \u043f\u0440\u0435\u0432\u044c\u044e"})}):null};return(0,f.jsx)("div",{style:x,className:n,children:(0,f.jsx)("div",{className:w,style:v,onClick:()=>{o(e=>!e),s&&c(Array.from({length:3},()=>({x:0,y:0})))},children:(0,f.jsxs)("div",{className:"folder__back",children:[[0,1,2].map(e=>{var i,t;return(0,f.jsx)("div",{className:"paper paper-".concat(e+1),onClick:i=>((e,i)=>{e.stopPropagation(),a&&a(i)})(i,e),onMouseMove:i=>((e,i)=>{if(!s)return;const t=e.currentTarget.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2,r=.15*(e.clientX-n),o=.15*(e.clientY-a);c(e=>{const t=[...e];return t[i]={x:r,y:o},t})})(i,e),onMouseLeave:i=>{return t=e,void c(e=>{const i=[...e];return i[t]={x:0,y:0},i});var t},style:s?{"--magnet-x":"".concat((null===(i=l[e])||void 0===i?void 0:i.x)||0,"px"),"--magnet-y":"".concat((null===(t=l[e])||void 0===t?void 0:t.y)||0,"px")}:{},children:V(e)},e)}),(0,f.jsx)("div",{className:"folder__front"}),(0,f.jsx)("div",{className:"folder__front right"})]})})})};function g(e){let{onFileSelect:i,selectedFile:t,onCancel:n,onSubmit:a,isValid:o}=e;const l=(0,s.Zp)(),[c,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(""),[v,w]=(0,r.useState)(0),x=(0,r.useRef)(null),V=(0,h.Z5)();r.useEffect(()=>{t&&w(e=>e+1)},[t]);const S=e=>(p(""),e.type.startsWith("video/")?!(e.size>V.maxFileSize)||(p("\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 ".concat(V.maxFileSizeMB," \u041c\u0411")),!1):(p("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434\u0435\u043e \u0444\u0430\u0439\u043b"),!1));return(0,f.jsxs)("div",{className:"video-upload-container",children:[(0,f.jsx)("h2",{className:"upload-title",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),t?(0,f.jsxs)("div",{className:"file-selected",children:[(0,f.jsxs)("div",{className:"file-info",children:[(0,f.jsx)("div",{className:"file-icon-wrapper",children:(0,f.jsx)(d,{className:"file-icon"})}),(0,f.jsxs)("div",{className:"file-details",children:[(0,f.jsx)("p",{className:"file-name",children:t.name}),(0,f.jsx)("p",{className:"file-size",children:(e=>{if(0===e)return"0 Bytes";const i=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,i))+" "+["Bytes","KB","MB","GB"][i]})(t.size)})]})]}),(0,f.jsxs)("div",{className:"action-buttons",children:[(0,f.jsx)("button",{className:"btn-cancel",onClick:n,children:"\u041d\u0430\u0437\u0430\u0434"}),(0,f.jsx)("button",{className:"btn-save ".concat(o?"":"disabled"),onClick:a,disabled:!o,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),(0,f.jsx)("div",{className:"folder-container",children:(0,f.jsx)(u,{size:1.5,color:"#8a5cff",onClick:()=>{l("/history")}},v)})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"drop-zone ".concat(c?"dragging":""," ").concat(g?"error":""),onDragOver:e=>{e.preventDefault(),m(!0)},onDragLeave:e=>{e.preventDefault(),m(!1)},onDrop:e=>{e.preventDefault(),m(!1);const t=e.dataTransfer.files;if(t.length>0){const e=t[0];S(e)&&i(e)}},onClick:()=>{var e;null===(e=x.current)||void 0===e||e.click()},children:[(0,f.jsx)(d,{className:"drop-icon"}),(0,f.jsx)("p",{className:"drop-text",children:"\u041f\u0435\u0440\u0435\u0442\u044f\u043d\u0438\u0442\u0435 \u0432\u0430\u0448 \u0444\u0430\u0439\u043b \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),(0,f.jsxs)("p",{className:"drop-limit",children:["\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 ",V.maxFileSizeMB," \u041c\u0411",(0,f.jsx)("br",{}),"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ",V.allowedDurations.join(" \u0438\u043b\u0438 ")," \u0441\u0435\u043a\u0443\u043d\u0434"]}),(0,f.jsx)("input",{ref:x,type:"file",accept:"video/*",onChange:e=>{const t=e.target.files;if(t.length>0){const e=t[0];S(e)&&i(e)}},style:{display:"none"}})]}),g&&(0,f.jsx)("div",{className:"error-message",children:g})]})]})}}}]);
//# sourceMappingURL=991.7c411b4b.chunk.js.map