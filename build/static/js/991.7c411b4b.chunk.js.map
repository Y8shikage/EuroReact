{"version":3,"file":"static/js/991.7c411b4b.chunk.js","mappings":"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","sources":["utils/videoValidator.js","assets/icons/DropFileIcon.svg","components/Folder/Folder.js","components/VideoUpload/VideoUpload.js"],"sourcesContent":["import screenRequirements from '../data/screenRequirements.json';\r\nimport backendConfig from '../config/backend.json';\r\n\r\n// Получаем общие настройки из нового формата\r\nconst commonSettings = screenRequirements.commonSettings;\r\nconst screens = screenRequirements.screens;\r\n\r\n// Конвертируем максимальный размер из MB в байты\r\nconst maxFileSizeBytes = commonSettings.maxSize * 1024 * 1024;\r\n\r\n// Функция для валидации видео на сервере\r\nconst validateVideoOnServer = async (file) => {\r\n  if (!backendConfig.ENABLE_BACKEND_VALIDATION) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    const response = await fetch(\r\n      `${backendConfig.BACKEND_URL}${backendConfig.ENDPOINTS.VALIDATE_VIDEO}`,\r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n        headers: {\r\n          'ngrok-skip-browser-warning': 'true'\r\n        }\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      console.error('Ошибка валидации на сервере:', response.status);\r\n      return null;\r\n    }\r\n\r\n    const result = await response.json();\r\n    return result;\r\n  } catch (error) {\r\n    console.error('Ошибка при обращении к серверу:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const validateVideo = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    // Проверка размера файла\r\n    const fileSizeValid = file.size <= maxFileSizeBytes;\r\n    \r\n    // Создаём видео элемент для получения метаданных\r\n    const video = document.createElement('video');\r\n    video.preload = 'metadata';\r\n    \r\n    video.onloadedmetadata = () => {\r\n      window.URL.revokeObjectURL(video.src);\r\n      \r\n      const duration = Math.round(video.duration);\r\n      const width = video.videoWidth;\r\n      const height = video.videoHeight;\r\n      \r\n      // Проверка длительности\r\n      const durationValid = commonSettings.allowedDurations.includes(duration);\r\n      \r\n      // Проверка разрешения - ищем подходящий экран\r\n      const matchingScreen = screens.find(\r\n        screen => screen.width === width && screen.height === height\r\n      );\r\n      const resolutionValid = matchingScreen !== undefined;\r\n      \r\n      const validationResult = {\r\n        isValid: fileSizeValid && durationValid && resolutionValid,\r\n        fileSize: file.size,\r\n        fileSizeValid,\r\n        duration,\r\n        durationValid,\r\n        width,\r\n        height,\r\n        resolutionValid,\r\n        fileName: file.name,\r\n        fileType: file.type,\r\n        matchingScreen: matchingScreen || null\r\n      };\r\n      \r\n      resolve(validationResult);\r\n    };\r\n    \r\n    video.onerror = () => {\r\n      reject(new Error('Не удалось загрузить видео'));\r\n    };\r\n    \r\n    video.src = URL.createObjectURL(file);\r\n  });\r\n};\r\n\r\nexport const getVideoMetadata = async (file) => {\r\n  try {\r\n    const validation = await validateVideo(file);\r\n    \r\n    // Получаем расширение файла\r\n    const fileExtension = file.name.split('.').pop().toLowerCase();\r\n    \r\n    // Проверяем контейнер\r\n    const containerValid = fileExtension === commonSettings.container;\r\n    \r\n    // Информация о подходящем экране\r\n    const screenInfo = validation.matchingScreen \r\n      ? `${validation.matchingScreen.name}${validation.matchingScreen.nightVersion ? ' (требуется ночная версия)' : ''}`\r\n      : 'Не найден подходящий экран';\r\n    \r\n    // Попытка получить данные с сервера\r\n    const serverValidation = await validateVideoOnServer(file);\r\n    \r\n    // Если сервер вернул данные, используем их для кодека и FPS\r\n    let codec = commonSettings.codec.toUpperCase();\r\n    let codecStatus = 'success';\r\n    let fps = commonSettings.fps.toString();\r\n    let fpsStatus = 'success';\r\n    let isValidFinal = validation.isValid && containerValid;\r\n    \r\n    if (serverValidation) {\r\n      // Получаем данные с сервера\r\n      codec = serverValidation.video_info?.codec || codec;\r\n      fps = serverValidation.video_info?.fps?.toString() || fps;\r\n      \r\n      // Проверяем валидность на основе ответа сервера\r\n      if (serverValidation.is_valid !== undefined) {\r\n        const codecMatch = serverValidation.video_info?.codec?.toLowerCase() === commonSettings.codec.toLowerCase();\r\n        const fpsMatch = Math.abs(parseFloat(serverValidation.video_info?.fps || 0) - commonSettings.fps) < 0.1;\r\n        \r\n        codecStatus = codecMatch ? 'success' : 'error';\r\n        fpsStatus = fpsMatch ? 'success' : 'error';\r\n        isValidFinal = validation.isValid && containerValid && codecMatch && fpsMatch;\r\n      }\r\n    }\r\n    \r\n    return {\r\n      duration: `${validation.duration} секунд`,\r\n      durationStatus: validation.durationValid ? 'success' : 'error',\r\n      container: `.${fileExtension}`,\r\n      containerStatus: containerValid ? 'success' : 'error',\r\n      codec: codec,\r\n      codecStatus: codecStatus,\r\n      fps: fps,\r\n      fpsStatus: fpsStatus,\r\n      resolution: `${validation.width}x${validation.height} px`,\r\n      resolutionStatus: validation.resolutionValid ? 'success' : 'error',\r\n      fileSize: validation.fileSize,\r\n      fileSizeValid: validation.fileSizeValid,\r\n      containerValid: containerValid,\r\n      isValid: isValidFinal,\r\n      screenInfo: screenInfo,\r\n      matchingScreen: validation.matchingScreen,\r\n      serverValidation: serverValidation // Для отладки\r\n    };\r\n  } catch (error) {\r\n    console.error('Ошибка при получении метаданных:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const formatFileSize = (bytes) => {\r\n  if (bytes === 0) return '0 Bytes';\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  return Math.round(bytes / Math.pow(k, i)) + ' ' + sizes[i];\r\n};\r\n\r\n// Экспортируем функции для получения требований\r\nexport const getRequirements = () => ({\r\n  maxFileSize: maxFileSizeBytes,\r\n  maxFileSizeMB: commonSettings.maxSize,\r\n  allowedDurations: commonSettings.allowedDurations,\r\n  allowedFormats: [`video/${commonSettings.container}`],\r\n  allowedContainers: [commonSettings.container],\r\n  fps: commonSettings.fps,\r\n  codec: commonSettings.codec\r\n});\r\n\r\nexport const getScreens = () => screens;\r\n\r\nexport const getScreenByResolution = (width, height) => {\r\n  return screens.find(screen => screen.width === width && screen.height === height);\r\n};\r\n\r\n","var _path, _path2;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgDropFileIcon(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 48,\n    height: 62,\n    viewBox: \"0 0 48 62\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30.7667 1.63518L46.299 17.8839V54.2442C46.299 54.2442 46.5693 59.9016 38.5328 59.9016H7.87378C7.87378 59.9016 1.5 60.351 1.5 51.2838V10.0434C1.5 8.45506 1.83795 6.8802 2.55441 5.46418C3.53447 3.53785 5.37969 1.5 8.81667 1.5C15.3256 1.5 30.7667 1.63518 30.7667 1.63518Z\",\n    stroke: \"white\",\n    strokeWidth: 3,\n    strokeMiterlimit: 10\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30.7156 2.48389V10.9564C30.7156 12.5278 31.0569 14.0926 31.7835 15.4883C32.7467 17.3437 34.5311 19.3072 37.7653 19.3072H45.7342\",\n    stroke: \"white\",\n    strokeWidth: 3,\n    strokeMiterlimit: 10\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgDropFileIcon);\nexport default __webpack_public_path__ + \"static/media/DropFileIcon.0143e5766fdf113536feddbf3ca20079.svg\";\nexport { ForwardRef as ReactComponent };","import { useState, useEffect } from 'react';\r\nimport './Folder.css';\r\n\r\nconst darkenColor = (hex, percent) => {\r\n  let color = hex.startsWith('#') ? hex.slice(1) : hex;\r\n  if (color.length === 3) {\r\n    color = color\r\n      .split('')\r\n      .map(c => c + c)\r\n      .join('');\r\n  }\r\n  const num = parseInt(color, 16);\r\n  let r = (num >> 16) & 0xff;\r\n  let g = (num >> 8) & 0xff;\r\n  let b = num & 0xff;\r\n  r = Math.max(0, Math.min(255, Math.floor(r * (1 - percent))));\r\n  g = Math.max(0, Math.min(255, Math.floor(g * (1 - percent))));\r\n  b = Math.max(0, Math.min(255, Math.floor(b * (1 - percent))));\r\n  return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();\r\n};\r\n\r\nconst Folder = ({ color = '#5227FF', size = 1, className = '', onClick }) => {\r\n  const maxItems = 3;\r\n  const [open, setOpen] = useState(false);\r\n  const [paperOffsets, setPaperOffsets] = useState(Array.from({ length: maxItems }, () => ({ x: 0, y: 0 })));\r\n  const [videoThumbnails, setVideoThumbnails] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Функция для загрузки последних 3 видео из истории\r\n    const loadThumbnails = () => {\r\n      try {\r\n        const savedHistory = localStorage.getItem('videoHistory');\r\n        if (savedHistory) {\r\n          const history = JSON.parse(savedHistory);\r\n          const lastThree = history.slice(0, 3);\r\n          setVideoThumbnails(lastThree);\r\n          console.log('Folder: загружено превью:', lastThree.length);\r\n        } else {\r\n          setVideoThumbnails([]);\r\n        }\r\n      } catch (error) {\r\n        console.error('Ошибка загрузки превью в Folder:', error);\r\n        setVideoThumbnails([]);\r\n      }\r\n    };\r\n\r\n    loadThumbnails();\r\n\r\n    // Обновляем при изменении localStorage\r\n    const handleStorageChange = (e) => {\r\n      if (e.key === 'videoHistory') {\r\n        loadThumbnails();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n\r\n  const folderBackColor = darkenColor(color, 0.08);\r\n  const paper1 = darkenColor('#ffffff', 0.1);\r\n  const paper2 = darkenColor('#ffffff', 0.05);\r\n  const paper3 = '#ffffff';\r\n\r\n  const handleClick = () => {\r\n    setOpen(prev => !prev);\r\n    if (open) {\r\n      setPaperOffsets(Array.from({ length: maxItems }, () => ({ x: 0, y: 0 })));\r\n    }\r\n  };\r\n\r\n  const handlePaperClick = (e, index) => {\r\n    e.stopPropagation();\r\n    if (onClick) {\r\n      onClick(index);\r\n    }\r\n  };\r\n\r\n  const handlePaperMouseMove = (e, index) => {\r\n    if (!open) return;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const centerX = rect.left + rect.width / 2;\r\n    const centerY = rect.top + rect.height / 2;\r\n    const offsetX = (e.clientX - centerX) * 0.15;\r\n    const offsetY = (e.clientY - centerY) * 0.15;\r\n\r\n    setPaperOffsets(prev => {\r\n      const newOffsets = [...prev];\r\n      newOffsets[index] = { x: offsetX, y: offsetY };\r\n      return newOffsets;\r\n    });\r\n  };\r\n\r\n  const handlePaperMouseLeave = (e, index) => {\r\n    setPaperOffsets(prev => {\r\n      const newOffsets = [...prev];\r\n      newOffsets[index] = { x: 0, y: 0 };\r\n      return newOffsets;\r\n    });\r\n  };\r\n\r\n  const folderStyle = {\r\n    '--folder-color': color,\r\n    '--folder-back-color': folderBackColor,\r\n    '--paper-1': paper1,\r\n    '--paper-2': paper2,\r\n    '--paper-3': paper3\r\n  };\r\n\r\n  const folderClassName = `folder ${open ? 'open' : ''}`.trim();\r\n  const scaleStyle = { transform: `scale(${size})` };\r\n\r\n  const renderPaperContent = (index) => {\r\n    const video = videoThumbnails[index];\r\n    if (!video) return null;\r\n\r\n    return (\r\n      <div className=\"paper-content\">\r\n        {video.thumbnail ? (\r\n          <img src={video.thumbnail} alt={video.fileName} className=\"paper-full-thumbnail\" />\r\n        ) : (\r\n          <div className=\"paper-no-thumbnail\">Нет превью</div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={scaleStyle} className={className}>\r\n      <div className={folderClassName} style={folderStyle} onClick={handleClick}>\r\n        <div className=\"folder__back\">\r\n          {[0, 1, 2].map((i) => (\r\n            <div\r\n              key={i}\r\n              className={`paper paper-${i + 1}`}\r\n              onClick={(e) => handlePaperClick(e, i)}\r\n              onMouseMove={e => handlePaperMouseMove(e, i)}\r\n              onMouseLeave={e => handlePaperMouseLeave(e, i)}\r\n              style={\r\n                open\r\n                  ? {\r\n                      '--magnet-x': `${paperOffsets[i]?.x || 0}px`,\r\n                      '--magnet-y': `${paperOffsets[i]?.y || 0}px`\r\n                    }\r\n                  : {}\r\n              }\r\n            >\r\n              {renderPaperContent(i)}\r\n            </div>\r\n          ))}\r\n          <div className=\"folder__front\"></div>\r\n          <div className=\"folder__front right\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Folder;\r\n\r\n","import React, { useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ReactComponent as DropFileIcon } from '../../assets/icons/DropFileIcon.svg';\r\nimport { getRequirements } from '../../utils/videoValidator';\r\nimport Folder from '../Folder';\r\nimport './VideoUpload.css';\r\n\r\nexport default function VideoUpload({ onFileSelect, selectedFile, onCancel, onSubmit, isValid }) {\r\n  const navigate = useNavigate();\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [folderKey, setFolderKey] = useState(0);\r\n  const fileInputRef = useRef(null);\r\n  const requirements = getRequirements();\r\n\r\n  const handleFolderClick = () => {\r\n    navigate('/history');\r\n  };\r\n\r\n  // Обновляем ключ Folder при изменении selectedFile\r\n  React.useEffect(() => {\r\n    if (selectedFile) {\r\n      setFolderKey(prev => prev + 1);\r\n    }\r\n  }, [selectedFile]);\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const validateFile = (file) => {\r\n    setError('');\r\n    \r\n    // Проверка типа файла\r\n    if (!file.type.startsWith('video/')) {\r\n      setError('Пожалуйста, выберите видео файл');\r\n      return false;\r\n    }\r\n    \r\n    // Проверка размера файла\r\n    if (file.size > requirements.maxFileSize) {\r\n      setError(`Размер файла превышает ${requirements.maxFileSizeMB} МБ`);\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    \r\n    const files = e.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      const file = files[0];\r\n      if (validateFile(file)) {\r\n        onFileSelect(file);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFileInput = (e) => {\r\n    const files = e.target.files;\r\n    if (files.length > 0) {\r\n      const file = files[0];\r\n      if (validateFile(file)) {\r\n        onFileSelect(file);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i)) + ' ' + sizes[i];\r\n  };\r\n\r\n  return (\r\n    <div className=\"video-upload-container\">\r\n      <h2 className=\"upload-title\">Загрузить</h2>\r\n      \r\n      {!selectedFile ? (\r\n        <>\r\n          <div\r\n            className={`drop-zone ${isDragging ? 'dragging' : ''} ${error ? 'error' : ''}`}\r\n            onDragOver={handleDragOver}\r\n            onDragLeave={handleDragLeave}\r\n            onDrop={handleDrop}\r\n            onClick={handleClick}\r\n          >\r\n            <DropFileIcon className=\"drop-icon\" />\r\n            <p className=\"drop-text\">Перетяните ваш файл или загрузите с устройства</p>\r\n            <p className=\"drop-limit\">\r\n              Максимальный размер файла {requirements.maxFileSizeMB} МБ\r\n              <br />\r\n              Длительность: {requirements.allowedDurations.join(' или ')} секунд\r\n            </p>\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={handleFileInput}\r\n              style={{ display: 'none' }}\r\n            />\r\n          </div>\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n        </>\r\n      ) : (\r\n        <div className=\"file-selected\">\r\n          <div className=\"file-info\">\r\n            <div className=\"file-icon-wrapper\">\r\n              <DropFileIcon className=\"file-icon\" />\r\n            </div>\r\n            <div className=\"file-details\">\r\n              <p className=\"file-name\">{selectedFile.name}</p>\r\n              <p className=\"file-size\">{formatFileSize(selectedFile.size)}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"action-buttons\">\r\n            <button className=\"btn-cancel\" onClick={onCancel}>\r\n              Назад\r\n            </button>\r\n            <button \r\n              className={`btn-save ${!isValid ? 'disabled' : ''}`}\r\n              onClick={onSubmit}\r\n              disabled={!isValid}\r\n            >\r\n              Отправить\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"folder-container\">\r\n            <Folder \r\n              key={folderKey}\r\n              size={1.5} \r\n              color=\"#8a5cff\" \r\n              onClick={handleFolderClick}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["commonSettings","screenRequirements","screens","maxFileSizeBytes","maxSize","getVideoMetadata","async","validation","file","Promise","resolve","reject","fileSizeValid","size","video","document","createElement","preload","onloadedmetadata","window","URL","revokeObjectURL","src","duration","Math","round","width","videoWidth","height","videoHeight","durationValid","allowedDurations","includes","matchingScreen","find","screen","resolutionValid","undefined","validationResult","isValid","fileSize","fileName","name","fileType","type","onerror","Error","createObjectURL","validateVideo","fileExtension","split","pop","toLowerCase","containerValid","container","screenInfo","concat","nightVersion","serverValidation","backendConfig","formData","FormData","append","response","fetch","method","body","headers","ok","json","console","error","status","validateVideoOnServer","codec","toUpperCase","codecStatus","fps","toString","fpsStatus","isValidFinal","_serverValidation$vid","_serverValidation$vid2","_serverValidation$vid3","video_info","is_valid","_serverValidation$vid4","_serverValidation$vid5","_serverValidation$vid6","codecMatch","fpsMatch","abs","parseFloat","durationStatus","containerStatus","resolution","resolutionStatus","getRequirements","maxFileSize","maxFileSizeMB","allowedFormats","allowedContainers","_path","_path2","_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","SvgDropFileIcon","_ref","svgRef","title","titleId","props","o","i","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","propertyIsEnumerable","_objectWithoutProperties","viewBox","fill","xmlns","ref","id","d","stroke","strokeWidth","strokeMiterlimit","ForwardRef","darkenColor","hex","percent","color","startsWith","slice","map","c","join","num","parseInt","g","b","max","min","floor","className","onClick","open","setOpen","useState","paperOffsets","setPaperOffsets","Array","from","x","y","videoThumbnails","setVideoThumbnails","useEffect","loadThumbnails","savedHistory","localStorage","getItem","lastThree","JSON","parse","log","handleStorageChange","key","addEventListener","removeEventListener","folderBackColor","paper1","paper2","folderStyle","folderClassName","trim","scaleStyle","transform","renderPaperContent","index","_jsx","children","thumbnail","alt","style","handleClick","prev","_jsxs","_paperOffsets$i","_paperOffsets$i2","handlePaperClick","stopPropagation","onMouseMove","handlePaperMouseMove","rect","currentTarget","getBoundingClientRect","centerX","left","centerY","top","offsetX","clientX","offsetY","clientY","newOffsets","onMouseLeave","handlePaperMouseLeave","VideoUpload","onFileSelect","selectedFile","onCancel","onSubmit","navigate","useNavigate","isDragging","setIsDragging","setError","folderKey","setFolderKey","fileInputRef","useRef","requirements","React","validateFile","DropFileIcon","bytes","pow","formatFileSize","disabled","Folder","handleFolderClick","_Fragment","onDragOver","preventDefault","onDragLeave","onDrop","files","dataTransfer","_fileInputRef$current","current","click","accept","onChange","target","display"],"ignoreList":[],"sourceRoot":""}