"use strict";(self.webpackChunkcours_project=self.webpackChunkcours_project||[]).push([[631],{631:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var i=t(43),o=t(755),r=t(532),a=t(150),s=t(611),u=t(579);const l=e=>{let{enableRainbow:n=!1,gridColor:t="#ffffff",rippleIntensity:l=.05,gridSize:c=10,gridThickness:v=15,fadeDistance:f=1.5,vignetteStrength:m=2,glowIntensity:d=.1,opacity:g=1,gridRotation:p=0,mouseInteraction:h=!0,mouseInteractionRadius:y=1}=e;const I=(0,i.useRef)(null),R=(0,i.useRef)({x:.5,y:.5}),x=(0,i.useRef)({x:.5,y:.5}),w=(0,i.useRef)(0),b=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const e=I.current;if(!e)return;const i=new o.A({dpr:Math.min(window.devicePixelRatio,2),alpha:!0}),u=i.gl;u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.canvas.style.width="100%",u.canvas.style.height="100%",e.appendChild(u.canvas);const T={iTime:{value:0},iResolution:{value:[1,1]},enableRainbow:{value:n},gridColor:{value:(e=>{const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16)/255,parseInt(n[2],16)/255,parseInt(n[3],16)/255]:[1,1,1]})(t)},rippleIntensity:{value:l},gridSize:{value:c},gridThickness:{value:v},fadeDistance:{value:f},vignetteStrength:{value:m},glowIntensity:{value:d},opacity:{value:g},gridRotation:{value:p},mouseInteraction:{value:h},mousePosition:{value:[.5,.5]},mouseInfluence:{value:0},mouseInteractionRadius:{value:y}};b.current=T;const C=new r.l(u),k=new a.B(u,{vertex:"\nattribute vec2 position;\nvarying vec2 vUv;\nvoid main() {\n    vUv = position * 0.5 + 0.5;\n    gl_Position = vec4(position, 0.0, 1.0);\n}",fragment:"precision highp float;\nuniform float iTime;\nuniform vec2 iResolution;\nuniform bool enableRainbow;\nuniform vec3 gridColor;\nuniform float rippleIntensity;\nuniform float gridSize;\nuniform float gridThickness;\nuniform float fadeDistance;\nuniform float vignetteStrength;\nuniform float glowIntensity;\nuniform float opacity;\nuniform float gridRotation;\nuniform bool mouseInteraction;\nuniform vec2 mousePosition;\nuniform float mouseInfluence;\nuniform float mouseInteractionRadius;\nvarying vec2 vUv;\n\nfloat pi = 3.141592;\n\nmat2 rotate(float angle) {\n    float s = sin(angle);\n    float c = cos(angle);\n    return mat2(c, -s, s, c);\n}\n\nvoid main() {\n    vec2 uv = vUv * 2.0 - 1.0;\n    uv.x *= iResolution.x / iResolution.y;\n\n    if (gridRotation != 0.0) {\n        uv = rotate(gridRotation * pi / 180.0) * uv;\n    }\n\n    float dist = length(uv);\n    float func = sin(pi * (iTime - dist));\n    vec2 rippleUv = uv + uv * func * rippleIntensity;\n\n    if (mouseInteraction && mouseInfluence > 0.0) {\n        vec2 mouseUv = (mousePosition * 2.0 - 1.0);\n        mouseUv.x *= iResolution.x / iResolution.y;\n        float mouseDist = length(uv - mouseUv);\n        \n        float influence = mouseInfluence * exp(-mouseDist * mouseDist / (mouseInteractionRadius * mouseInteractionRadius));\n        \n        float mouseWave = sin(pi * (iTime * 2.0 - mouseDist * 3.0)) * influence;\n        rippleUv += normalize(uv - mouseUv) * mouseWave * rippleIntensity * 0.3;\n    }\n\n    vec2 a = sin(gridSize * 0.5 * pi * rippleUv - pi / 2.0);\n    vec2 b = abs(a);\n\n    float aaWidth = 0.5;\n    vec2 smoothB = vec2(\n        smoothstep(0.0, aaWidth, b.x),\n        smoothstep(0.0, aaWidth, b.y)\n    );\n\n    vec3 color = vec3(0.0);\n    color += exp(-gridThickness * smoothB.x * (0.8 + 0.5 * sin(pi * iTime)));\n    color += exp(-gridThickness * smoothB.y);\n    color += 0.5 * exp(-(gridThickness / 4.0) * sin(smoothB.x));\n    color += 0.5 * exp(-(gridThickness / 3.0) * smoothB.y);\n\n    if (glowIntensity > 0.0) {\n        color += glowIntensity * exp(-gridThickness * 0.5 * smoothB.x);\n        color += glowIntensity * exp(-gridThickness * 0.5 * smoothB.y);\n    }\n\n    float ddd = exp(-2.0 * clamp(pow(dist, fadeDistance), 0.0, 1.0));\n    \n    vec2 vignetteCoords = vUv - 0.5;\n    float vignetteDistance = length(vignetteCoords);\n    float vignette = 1.0 - pow(vignetteDistance * 2.0, vignetteStrength);\n    vignette = clamp(vignette, 0.0, 1.0);\n    \n    vec3 t;\n    if (enableRainbow) {\n        t = vec3(\n            uv.x * 0.5 + 0.5 * sin(iTime),\n            uv.y * 0.5 + 0.5 * cos(iTime),\n            pow(cos(iTime), 4.0)\n        ) + 0.5;\n    } else {\n        t = gridColor;\n    }\n\n    float finalFade = ddd * vignette;\n    float alpha = length(color) * finalFade * opacity;\n    gl_FragColor = vec4(color * t * finalFade * opacity, alpha);\n}",uniforms:T}),E=new s.e(u,{geometry:C,program:k}),S=()=>{const{clientWidth:n,clientHeight:t}=e;i.setSize(n,t),T.iResolution.value=[n,t]},U=n=>{if(!h||!e)return;const t=e.getBoundingClientRect(),i=(n.clientX-t.left)/t.width,o=1-(n.clientY-t.top)/t.height;x.current={x:i,y:o}},D=()=>{h&&(w.current=1)},L=()=>{h&&(w.current=0)};window.addEventListener("resize",S),h&&(e.addEventListener("mousemove",U),e.addEventListener("mouseenter",D),e.addEventListener("mouseleave",L)),S();const B=e=>{T.iTime.value=.001*e;R.current.x+=.1*(x.current.x-R.current.x),R.current.y+=.1*(x.current.y-R.current.y);const n=T.mouseInfluence.value,t=w.current;T.mouseInfluence.value+=.05*(t-n),T.mousePosition.value=[R.current.x,R.current.y],i.render({scene:E}),requestAnimationFrame(B)};return requestAnimationFrame(B),()=>{var n;window.removeEventListener("resize",S),h&&e&&(e.removeEventListener("mousemove",U),e.removeEventListener("mouseenter",D),e.removeEventListener("mouseleave",L)),null===(n=i.gl.getExtension("WEBGL_lose_context"))||void 0===n||n.loseContext(),null===e||void 0===e||e.removeChild(u.canvas)}},[]),(0,i.useEffect)(()=>{if(!b.current)return;b.current.enableRainbow.value=n,b.current.gridColor.value=(e=>{const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16)/255,parseInt(n[2],16)/255,parseInt(n[3],16)/255]:[1,1,1]})(t),b.current.rippleIntensity.value=l,b.current.gridSize.value=c,b.current.gridThickness.value=v,b.current.fadeDistance.value=f,b.current.vignetteStrength.value=m,b.current.glowIntensity.value=d,b.current.opacity.value=g,b.current.gridRotation.value=p,b.current.mouseInteraction.value=h,b.current.mouseInteractionRadius.value=y},[n,t,l,c,v,f,m,d,g,p,h,y]),(0,u.jsx)("div",{ref:I,className:"ripple-grid-container"})}}}]);
//# sourceMappingURL=631.a6bab218.chunk.js.map