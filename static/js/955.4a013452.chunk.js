"use strict";(self.webpackChunkcours_project=self.webpackChunkcours_project||[]).push([[955],{786:(e,a,i)=>{i.r(a),i.d(a,{default:()=>d});var n=i(43),t=i(833),s=i(631),l=i(90),o=i(691),c=i(996),r=i(579);const d=function(){const e=(0,t.Zp)(),[a,i]=(0,n.useState)([]),[d,m]=(0,n.useState)(!1),[h,u]=(0,n.useState)(null),[f,p]=(0,n.useState)(1);(0,n.useEffect)(()=>{localStorage.getItem("user")?j():e("/")},[e]);const j=()=>{const e=JSON.parse(localStorage.getItem("user")),a=(null===e||void 0===e?void 0:e.username)||"unknown",n=(0,c.Ss)(a);i(n)},g=()=>{m(!1),u(null)},x="admin"===JSON.parse(localStorage.getItem("user")||"{}").role?[{label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",href:"#",action:"home"},{label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",href:"#",action:"history"},{label:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",href:"#",action:"notifications"},{label:"\u0410\u0434\u043c\u0438\u043d",href:"#",action:"admin"},{label:"\u0412\u044b\u0445\u043e\u0434",href:"#",action:"logout"}]:[{label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",href:"#",action:"home"},{label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",href:"#",action:"history"},{label:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",href:"#",action:"notifications"},{label:"\u0412\u044b\u0445\u043e\u0434",href:"#",action:"logout"}],b=Math.ceil(a.length/4),N=4*(f-1),v=N+4,k=a.slice(N,v),S=e=>{p(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,r.jsxs)("div",{className:"notifications-page",children:[(0,r.jsx)("div",{className:"notifications-background",children:(0,r.jsx)(s.default,{enableRainbow:!1,gridColor:"#8a5cff",rippleIntensity:.01,gridSize:20,gridThickness:20,fadeDistance:2.5,vignetteStrength:1.5,glowIntensity:.2,mouseInteraction:!0,mouseInteractionRadius:1.2,opacity:.9})}),(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsx)("div",{className:"page-logo",children:(0,r.jsx)(o.h,{})}),(0,r.jsx)(l.default,{items:x,particleCount:15,particleDistances:[90,10],particleR:100,initialActiveIndex:2,animationTime:600,timeVariance:300,colors:[1,2,3,1,2,3,1,4],onItemClick:a=>{if("home"===a.action)e("/home");else if("history"===a.action)e("/history");else{if("notifications"===a.action)return;"admin"===a.action?e("/admin"):"logout"===a.action&&(localStorage.removeItem("user"),e("/"))}}})]}),(0,r.jsxs)("div",{className:"notifications-content",children:[(0,r.jsxs)("div",{className:"notifications-header",children:[(0,r.jsxs)("div",{className:"notifications-header-left",children:[(0,r.jsx)("button",{className:"btn-back",onClick:()=>{e("/home")},children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,r.jsx)("h1",{className:"notifications-title",children:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"})]}),a.length>0&&(0,r.jsxs)("div",{className:"notifications-header-actions",children:[(0,r.jsx)("button",{className:"btn-mark-all-read",onClick:()=>{const e=JSON.parse(localStorage.getItem("user")),a=(null===e||void 0===e?void 0:e.username)||"unknown";(0,c.X0)(a),j()},children:"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0432\u0441\u0451"}),a.some(e=>e.read)&&(0,r.jsx)("button",{className:"btn-delete-all-read",onClick:()=>{const e=JSON.parse(localStorage.getItem("user")),a=(null===e||void 0===e?void 0:e.username)||"unknown";if((0,c.bW)(a)>0){j();const e=(0,c.Ss)(a),i=Math.ceil(e.length/4);f>i&&i>0?p(i):0===e.length&&p(1)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"})]})]}),(0,r.jsx)("div",{className:"notifications-list",children:0===a.length?(0,r.jsxs)("div",{className:"empty-notifications",children:[(0,r.jsx)("div",{className:"empty-icon",children:"\ud83d\udd14"}),(0,r.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"})]}):k.map(e=>(0,r.jsxs)("div",{className:"notification-item ".concat(e.read?"read":"unread"," ").concat(e.type),children:[(0,r.jsxs)("div",{className:"notification-icon",children:["approved"===e.type&&"\u2713","rejected"===e.type&&"\u2717","info"===e.type&&"\u2139"]}),(0,r.jsxs)("div",{className:"notification-content",children:[(0,r.jsx)("h3",{children:e.fileName}),(0,r.jsx)("p",{children:e.message}),(0,r.jsx)("span",{className:"notification-time",children:new Date(e.timestamp).toLocaleString("ru-RU")})]}),(0,r.jsxs)("div",{className:"notification-actions",children:[!e.read&&(0,r.jsx)("button",{className:"btn-mark-read",onClick:()=>{return a=e.id,(0,c.aI)(a),void j();var a},title:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435",children:"\u2713"}),(0,r.jsx)("button",{className:"btn-delete-notification",onClick:()=>(e=>{u(e),m(!0)})(e),title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:"\ud83d\uddd1\ufe0f"})]})]},e.id))}),b>1&&(0,r.jsxs)("div",{className:"pagination",children:[(0,r.jsx)("button",{className:"pagination-btn",onClick:()=>S(f-1),disabled:1===f,children:"\u2190 \u041d\u0430\u0437\u0430\u0434"}),(0,r.jsx)("div",{className:"pagination-pages",children:Array.from({length:b},(e,a)=>a+1).map(e=>(0,r.jsx)("button",{className:"pagination-page ".concat(f===e?"active":""),onClick:()=>S(e),children:e},e))}),(0,r.jsx)("button",{className:"pagination-btn",onClick:()=>S(f+1),disabled:f===b,children:"\u0412\u043f\u0435\u0440\u0451\u0434 \u2192"})]})]}),d&&(0,r.jsx)("div",{className:"modal-overlay",onClick:g,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{className:"modal-title",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435?"}),(0,r.jsx)("p",{className:"modal-text",children:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435?"}),(0,r.jsxs)("div",{className:"modal-buttons",children:[(0,r.jsx)("button",{className:"modal-btn modal-btn-cancel",onClick:g,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,r.jsx)("button",{className:"modal-btn modal-btn-confirm",onClick:()=>{if(h){(0,c.fP)(h.id),j(),m(!1),u(null);const e=Math.ceil((a.length-1)/4);f>e&&e>0&&p(e)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})]})}}}]);
//# sourceMappingURL=955.4a013452.chunk.js.map