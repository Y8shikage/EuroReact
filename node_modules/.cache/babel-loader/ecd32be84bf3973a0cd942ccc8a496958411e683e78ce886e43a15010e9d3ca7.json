{"ast":null,"code":"// Утилита для управления уведомлениями\n\n/**\r\n * Создаёт уведомление для пользователя\r\n * @param {string} username - Имя пользователя\r\n * @param {string} type - Тип уведомления: 'approved', 'rejected', 'info'\r\n * @param {string} fileName - Название файла видео\r\n * @param {string} message - Дополнительное сообщение (опционально)\r\n */\nexport const createNotification = (username, type, fileName, message = '') => {\n  const notification = {\n    id: Date.now(),\n    username: username,\n    type: type,\n    fileName: fileName,\n    message: message,\n    timestamp: Date.now(),\n    read: false\n  };\n\n  // Получаем существующие уведомления\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n\n  // Добавляем новое уведомление\n  notifications.unshift(notification);\n\n  // Ограничиваем количество уведомлений (максимум 100)\n  if (notifications.length > 100) {\n    notifications.pop();\n  }\n\n  // Сохраняем\n  localStorage.setItem('notifications', JSON.stringify(notifications));\n  console.log('Уведомление создано:', notification);\n  return notification;\n};\n\n/**\r\n * Получает уведомления для конкретного пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {Array} Массив уведомлений\r\n */\nexport const getUserNotifications = username => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const allNotifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n\n  // Фильтруем по пользователю\n  return allNotifications.filter(n => n.username === username);\n};\n\n/**\r\n * Получает количество непрочитанных уведомлений\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество непрочитанных\r\n */\nexport const getUnreadCount = username => {\n  const userNotifications = getUserNotifications(username);\n  return userNotifications.filter(n => !n.read).length;\n};\n\n/**\r\n * Отмечает уведомление как прочитанное\r\n * @param {number} notificationId - ID уведомления\r\n */\nexport const markAsRead = notificationId => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n  const updatedNotifications = notifications.map(n => {\n    if (n.id === notificationId) {\n      return {\n        ...n,\n        read: true\n      };\n    }\n    return n;\n  });\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\n};\n\n/**\r\n * Отмечает все уведомления пользователя как прочитанные\r\n * @param {string} username - Имя пользователя\r\n */\nexport const markAllAsRead = username => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n  const updatedNotifications = notifications.map(n => {\n    if (n.username === username) {\n      return {\n        ...n,\n        read: true\n      };\n    }\n    return n;\n  });\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\n};\n\n/**\r\n * Удаляет уведомление\r\n * @param {number} notificationId - ID уведомления\r\n */\nexport const deleteNotification = notificationId => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n  const updatedNotifications = notifications.filter(n => n.id !== notificationId);\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\n};\n\n/**\r\n * Удаляет все прочитанные уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество удалённых уведомлений\r\n */\nexport const deleteAllReadNotifications = username => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n\n  // Считаем сколько прочитанных уведомлений будет удалено\n  const readCount = notifications.filter(n => n.username === username && n.read).length;\n\n  // Удаляем все прочитанные уведомления пользователя\n  const updatedNotifications = notifications.filter(n => {\n    // Оставляем уведомления других пользователей и непрочитанные уведомления текущего пользователя\n    return n.username !== username || !n.read;\n  });\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\n  return readCount;\n};\n\n/**\r\n * Очищает все уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n */\nexport const clearUserNotifications = username => {\n  const savedNotifications = localStorage.getItem('notifications');\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\n  const updatedNotifications = notifications.filter(n => n.username !== username);\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\n};\n\n/**\r\n * Создаёт уведомление об одобрении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n */\nexport const notifyVideoApproved = (username, fileName) => {\n  return createNotification(username, 'approved', fileName, 'Ваше видео успешно прошло проверку администратора!');\n};\n\n/**\r\n * Создаёт уведомление об отклонении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n * @param {string} reason - Причина отклонения\r\n */\nexport const notifyVideoRejected = (username, fileName, reason = '') => {\n  const message = reason ? `Ваше видео не прошло проверку. Причина: ${reason}` : 'Ваше видео не прошло проверку администратора.';\n  return createNotification(username, 'rejected', fileName, message);\n};\n\n/**\r\n * Создаёт информационное уведомление\r\n * @param {string} username - Имя пользователя\r\n * @param {string} title - Заголовок\r\n * @param {string} message - Сообщение\r\n */\nexport const notifyInfo = (username, title, message) => {\n  return createNotification(username, 'info', title, message);\n};","map":{"version":3,"names":["createNotification","username","type","fileName","message","notification","id","Date","now","timestamp","read","savedNotifications","localStorage","getItem","notifications","JSON","parse","unshift","length","pop","setItem","stringify","console","log","getUserNotifications","allNotifications","filter","n","getUnreadCount","userNotifications","markAsRead","notificationId","updatedNotifications","map","markAllAsRead","deleteNotification","deleteAllReadNotifications","readCount","clearUserNotifications","notifyVideoApproved","notifyVideoRejected","reason","notifyInfo","title"],"sources":["C:/Users/F1toF/OneDrive/Desktop/cours/cours/cours-project/src/utils/notificationManager.js"],"sourcesContent":["// Утилита для управления уведомлениями\r\n\r\n/**\r\n * Создаёт уведомление для пользователя\r\n * @param {string} username - Имя пользователя\r\n * @param {string} type - Тип уведомления: 'approved', 'rejected', 'info'\r\n * @param {string} fileName - Название файла видео\r\n * @param {string} message - Дополнительное сообщение (опционально)\r\n */\r\nexport const createNotification = (username, type, fileName, message = '') => {\r\n  const notification = {\r\n    id: Date.now(),\r\n    username: username,\r\n    type: type,\r\n    fileName: fileName,\r\n    message: message,\r\n    timestamp: Date.now(),\r\n    read: false\r\n  };\r\n\r\n  // Получаем существующие уведомления\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Добавляем новое уведомление\r\n  notifications.unshift(notification);\r\n\r\n  // Ограничиваем количество уведомлений (максимум 100)\r\n  if (notifications.length > 100) {\r\n    notifications.pop();\r\n  }\r\n\r\n  // Сохраняем\r\n  localStorage.setItem('notifications', JSON.stringify(notifications));\r\n\r\n  console.log('Уведомление создано:', notification);\r\n  return notification;\r\n};\r\n\r\n/**\r\n * Получает уведомления для конкретного пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {Array} Массив уведомлений\r\n */\r\nexport const getUserNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const allNotifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Фильтруем по пользователю\r\n  return allNotifications.filter(n => n.username === username);\r\n};\r\n\r\n/**\r\n * Получает количество непрочитанных уведомлений\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество непрочитанных\r\n */\r\nexport const getUnreadCount = (username) => {\r\n  const userNotifications = getUserNotifications(username);\r\n  return userNotifications.filter(n => !n.read).length;\r\n};\r\n\r\n/**\r\n * Отмечает уведомление как прочитанное\r\n * @param {number} notificationId - ID уведомления\r\n */\r\nexport const markAsRead = (notificationId) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.map(n => {\r\n    if (n.id === notificationId) {\r\n      return { ...n, read: true };\r\n    }\r\n    return n;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Отмечает все уведомления пользователя как прочитанные\r\n * @param {string} username - Имя пользователя\r\n */\r\nexport const markAllAsRead = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.map(n => {\r\n    if (n.username === username) {\r\n      return { ...n, read: true };\r\n    }\r\n    return n;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Удаляет уведомление\r\n * @param {number} notificationId - ID уведомления\r\n */\r\nexport const deleteNotification = (notificationId) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.filter(n => n.id !== notificationId);\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Удаляет все прочитанные уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество удалённых уведомлений\r\n */\r\nexport const deleteAllReadNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Считаем сколько прочитанных уведомлений будет удалено\r\n  const readCount = notifications.filter(n => n.username === username && n.read).length;\r\n\r\n  // Удаляем все прочитанные уведомления пользователя\r\n  const updatedNotifications = notifications.filter(n => {\r\n    // Оставляем уведомления других пользователей и непрочитанные уведомления текущего пользователя\r\n    return n.username !== username || !n.read;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n  return readCount;\r\n};\r\n\r\n/**\r\n * Очищает все уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n */\r\nexport const clearUserNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.filter(n => n.username !== username);\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Создаёт уведомление об одобрении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n */\r\nexport const notifyVideoApproved = (username, fileName) => {\r\n  return createNotification(\r\n    username,\r\n    'approved',\r\n    fileName,\r\n    'Ваше видео успешно прошло проверку администратора!'\r\n  );\r\n};\r\n\r\n/**\r\n * Создаёт уведомление об отклонении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n * @param {string} reason - Причина отклонения\r\n */\r\nexport const notifyVideoRejected = (username, fileName, reason = '') => {\r\n  const message = reason \r\n    ? `Ваше видео не прошло проверку. Причина: ${reason}`\r\n    : 'Ваше видео не прошло проверку администратора.';\r\n  \r\n  return createNotification(\r\n    username,\r\n    'rejected',\r\n    fileName,\r\n    message\r\n  );\r\n};\r\n\r\n/**\r\n * Создаёт информационное уведомление\r\n * @param {string} username - Имя пользователя\r\n * @param {string} title - Заголовок\r\n * @param {string} message - Сообщение\r\n */\r\nexport const notifyInfo = (username, title, message) => {\r\n  return createNotification(\r\n    username,\r\n    'info',\r\n    title,\r\n    message\r\n  );\r\n};\r\n\r\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,kBAAkB,GAAGA,CAACC,QAAQ,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,OAAO,GAAG,EAAE,KAAK;EAC5E,MAAMC,YAAY,GAAG;IACnBC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;IACdP,QAAQ,EAAEA,QAAQ;IAClBC,IAAI,EAAEA,IAAI;IACVC,QAAQ,EAAEA,QAAQ;IAClBC,OAAO,EAAEA,OAAO;IAChBK,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC,CAAC;IACrBE,IAAI,EAAE;EACR,CAAC;;EAED;EACA,MAAMC,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;;EAE9E;EACAG,aAAa,CAACG,OAAO,CAACZ,YAAY,CAAC;;EAEnC;EACA,IAAIS,aAAa,CAACI,MAAM,GAAG,GAAG,EAAE;IAC9BJ,aAAa,CAACK,GAAG,CAAC,CAAC;EACrB;;EAEA;EACAP,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACP,aAAa,CAAC,CAAC;EAEpEQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAElB,YAAY,CAAC;EACjD,OAAOA,YAAY;AACrB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMmB,oBAAoB,GAAIvB,QAAQ,IAAK;EAChD,MAAMU,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMY,gBAAgB,GAAGd,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;;EAEjF;EACA,OAAOc,gBAAgB,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC1B,QAAQ,KAAKA,QAAQ,CAAC;AAC9D,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAM2B,cAAc,GAAI3B,QAAQ,IAAK;EAC1C,MAAM4B,iBAAiB,GAAGL,oBAAoB,CAACvB,QAAQ,CAAC;EACxD,OAAO4B,iBAAiB,CAACH,MAAM,CAACC,CAAC,IAAI,CAACA,CAAC,CAACjB,IAAI,CAAC,CAACQ,MAAM;AACtD,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMY,UAAU,GAAIC,cAAc,IAAK;EAC5C,MAAMpB,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;EAE9E,MAAMqB,oBAAoB,GAAGlB,aAAa,CAACmB,GAAG,CAACN,CAAC,IAAI;IAClD,IAAIA,CAAC,CAACrB,EAAE,KAAKyB,cAAc,EAAE;MAC3B,OAAO;QAAE,GAAGJ,CAAC;QAAEjB,IAAI,EAAE;MAAK,CAAC;IAC7B;IACA,OAAOiB,CAAC;EACV,CAAC,CAAC;EAEFf,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACW,oBAAoB,CAAC,CAAC;AAC7E,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAME,aAAa,GAAIjC,QAAQ,IAAK;EACzC,MAAMU,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;EAE9E,MAAMqB,oBAAoB,GAAGlB,aAAa,CAACmB,GAAG,CAACN,CAAC,IAAI;IAClD,IAAIA,CAAC,CAAC1B,QAAQ,KAAKA,QAAQ,EAAE;MAC3B,OAAO;QAAE,GAAG0B,CAAC;QAAEjB,IAAI,EAAE;MAAK,CAAC;IAC7B;IACA,OAAOiB,CAAC;EACV,CAAC,CAAC;EAEFf,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACW,oBAAoB,CAAC,CAAC;AAC7E,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMG,kBAAkB,GAAIJ,cAAc,IAAK;EACpD,MAAMpB,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;EAE9E,MAAMqB,oBAAoB,GAAGlB,aAAa,CAACY,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKyB,cAAc,CAAC;EAC/EnB,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACW,oBAAoB,CAAC,CAAC;AAC7E,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMI,0BAA0B,GAAInC,QAAQ,IAAK;EACtD,MAAMU,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;;EAE9E;EACA,MAAM0B,SAAS,GAAGvB,aAAa,CAACY,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC1B,QAAQ,KAAKA,QAAQ,IAAI0B,CAAC,CAACjB,IAAI,CAAC,CAACQ,MAAM;;EAErF;EACA,MAAMc,oBAAoB,GAAGlB,aAAa,CAACY,MAAM,CAACC,CAAC,IAAI;IACrD;IACA,OAAOA,CAAC,CAAC1B,QAAQ,KAAKA,QAAQ,IAAI,CAAC0B,CAAC,CAACjB,IAAI;EAC3C,CAAC,CAAC;EAEFE,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACW,oBAAoB,CAAC,CAAC;EAC3E,OAAOK,SAAS;AAClB,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAIrC,QAAQ,IAAK;EAClD,MAAMU,kBAAkB,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EAChE,MAAMC,aAAa,GAAGH,kBAAkB,GAAGI,IAAI,CAACC,KAAK,CAACL,kBAAkB,CAAC,GAAG,EAAE;EAE9E,MAAMqB,oBAAoB,GAAGlB,aAAa,CAACY,MAAM,CAACC,CAAC,IAAIA,CAAC,CAAC1B,QAAQ,KAAKA,QAAQ,CAAC;EAC/EW,YAAY,CAACQ,OAAO,CAAC,eAAe,EAAEL,IAAI,CAACM,SAAS,CAACW,oBAAoB,CAAC,CAAC;AAC7E,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMO,mBAAmB,GAAGA,CAACtC,QAAQ,EAAEE,QAAQ,KAAK;EACzD,OAAOH,kBAAkB,CACvBC,QAAQ,EACR,UAAU,EACVE,QAAQ,EACR,oDACF,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMqC,mBAAmB,GAAGA,CAACvC,QAAQ,EAAEE,QAAQ,EAAEsC,MAAM,GAAG,EAAE,KAAK;EACtE,MAAMrC,OAAO,GAAGqC,MAAM,GAClB,2CAA2CA,MAAM,EAAE,GACnD,+CAA+C;EAEnD,OAAOzC,kBAAkB,CACvBC,QAAQ,EACR,UAAU,EACVE,QAAQ,EACRC,OACF,CAAC;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMsC,UAAU,GAAGA,CAACzC,QAAQ,EAAE0C,KAAK,EAAEvC,OAAO,KAAK;EACtD,OAAOJ,kBAAkB,CACvBC,QAAQ,EACR,MAAM,EACN0C,KAAK,EACLvC,OACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}