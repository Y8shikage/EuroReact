{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\F1toF\\\\OneDrive\\\\Desktop\\\\cours\\\\cours\\\\cours-project\\\\src\\\\components\\\\Iridescence\\\\Iridescence.js\",\n  _s = $RefreshSig$();\nimport { Renderer, Program, Mesh, Color, Triangle } from 'ogl';\nimport { useEffect, useRef } from 'react';\nimport './Iridescence.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst vertexShader = `\nattribute vec2 uv;\nattribute vec2 position;\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 0, 1);\n}\n`;\nconst fragmentShader = `\nprecision highp float;\nuniform float uTime;\nuniform vec3 uColor;\nuniform vec3 uResolution;\nuniform vec2 uMouse;\nuniform float uAmplitude;\nuniform float uSpeed;\nvarying vec2 vUv;\n\nvoid main() {\n  float mr = min(uResolution.x, uResolution.y);\n  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;\n  uv += (uMouse - vec2(0.5)) * uAmplitude;\n  float d = -uTime * 0.5 * uSpeed;\n  float a = 0.0;\n  for (float i = 0.0; i < 8.0; ++i) {\n    a += cos(i - d - a * uv.x);\n    d += sin(uv.y * i + a);\n  }\n  d += uTime * 0.5 * uSpeed;\n  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);\n  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;\n  gl_FragColor = vec4(col, 1.0);\n}\n`;\nexport default function Iridescence({\n  color = [1, 1, 1],\n  speed = 1.0,\n  amplitude = 0.1,\n  mouseReact = true,\n  ...rest\n}) {\n  _s();\n  const ctnDom = useRef(null);\n  const mousePos = useRef({\n    x: 0.5,\n    y: 0.5\n  });\n  useEffect(() => {\n    if (!ctnDom.current) return;\n    const ctn = ctnDom.current;\n    const renderer = new Renderer();\n    const gl = renderer.gl;\n    gl.clearColor(1, 1, 1, 1);\n    let program;\n    function resize() {\n      const scale = 1;\n      renderer.setSize(ctn.offsetWidth * scale, ctn.offsetHeight * scale);\n      if (program) {\n        program.uniforms.uResolution.value = new Color(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height);\n      }\n    }\n    window.addEventListener('resize', resize, false);\n    resize();\n    const geometry = new Triangle(gl);\n    program = new Program(gl, {\n      vertex: vertexShader,\n      fragment: fragmentShader,\n      uniforms: {\n        uTime: {\n          value: 0\n        },\n        uColor: {\n          value: new Color(...color)\n        },\n        uResolution: {\n          value: new Color(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height)\n        },\n        uMouse: {\n          value: new Float32Array([mousePos.current.x, mousePos.current.y])\n        },\n        uAmplitude: {\n          value: amplitude\n        },\n        uSpeed: {\n          value: speed\n        }\n      }\n    });\n    const mesh = new Mesh(gl, {\n      geometry,\n      program\n    });\n    let animateId;\n    function update(t) {\n      animateId = requestAnimationFrame(update);\n      program.uniforms.uTime.value = t * 0.001;\n      renderer.render({\n        scene: mesh\n      });\n    }\n    animateId = requestAnimationFrame(update);\n    ctn.appendChild(gl.canvas);\n    function handleMouseMove(e) {\n      const rect = ctn.getBoundingClientRect();\n      const x = (e.clientX - rect.left) / rect.width;\n      const y = 1.0 - (e.clientY - rect.top) / rect.height;\n      mousePos.current = {\n        x,\n        y\n      };\n      program.uniforms.uMouse.value[0] = x;\n      program.uniforms.uMouse.value[1] = y;\n    }\n    if (mouseReact) {\n      ctn.addEventListener('mousemove', handleMouseMove);\n    }\n    return () => {\n      var _gl$getExtension;\n      cancelAnimationFrame(animateId);\n      window.removeEventListener('resize', resize);\n      if (mouseReact) {\n        ctn.removeEventListener('mousemove', handleMouseMove);\n      }\n      ctn.removeChild(gl.canvas);\n      (_gl$getExtension = gl.getExtension('WEBGL_lose_context')) === null || _gl$getExtension === void 0 ? void 0 : _gl$getExtension.loseContext();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [color, speed, amplitude, mouseReact]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ctnDom,\n    className: \"iridescence-container\",\n    ...rest\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 10\n  }, this);\n}\n_s(Iridescence, \"4UT6OpJuIbbu8O/myXPXcGW257A=\");\n_c = Iridescence;\nvar _c;\n$RefreshReg$(_c, \"Iridescence\");","map":{"version":3,"names":["Renderer","Program","Mesh","Color","Triangle","useEffect","useRef","jsxDEV","_jsxDEV","vertexShader","fragmentShader","Iridescence","color","speed","amplitude","mouseReact","rest","_s","ctnDom","mousePos","x","y","current","ctn","renderer","gl","clearColor","program","resize","scale","setSize","offsetWidth","offsetHeight","uniforms","uResolution","value","canvas","width","height","window","addEventListener","geometry","vertex","fragment","uTime","uColor","uMouse","Float32Array","uAmplitude","uSpeed","mesh","animateId","update","t","requestAnimationFrame","render","scene","appendChild","handleMouseMove","e","rect","getBoundingClientRect","clientX","left","clientY","top","_gl$getExtension","cancelAnimationFrame","removeEventListener","removeChild","getExtension","loseContext","ref","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/F1toF/OneDrive/Desktop/cours/cours/cours-project/src/components/Iridescence/Iridescence.js"],"sourcesContent":["import { Renderer, Program, Mesh, Color, Triangle } from 'ogl';\r\nimport { useEffect, useRef } from 'react';\r\nimport './Iridescence.css';\r\n\r\nconst vertexShader = `\r\nattribute vec2 uv;\r\nattribute vec2 position;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = vec4(position, 0, 1);\r\n}\r\n`;\r\n\r\nconst fragmentShader = `\r\nprecision highp float;\r\nuniform float uTime;\r\nuniform vec3 uColor;\r\nuniform vec3 uResolution;\r\nuniform vec2 uMouse;\r\nuniform float uAmplitude;\r\nuniform float uSpeed;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  float mr = min(uResolution.x, uResolution.y);\r\n  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;\r\n  uv += (uMouse - vec2(0.5)) * uAmplitude;\r\n  float d = -uTime * 0.5 * uSpeed;\r\n  float a = 0.0;\r\n  for (float i = 0.0; i < 8.0; ++i) {\r\n    a += cos(i - d - a * uv.x);\r\n    d += sin(uv.y * i + a);\r\n  }\r\n  d += uTime * 0.5 * uSpeed;\r\n  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);\r\n  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;\r\n  gl_FragColor = vec4(col, 1.0);\r\n}\r\n`;\r\n\r\nexport default function Iridescence({ color = [1, 1, 1], speed = 1.0, amplitude = 0.1, mouseReact = true, ...rest }) {\r\n  const ctnDom = useRef(null);\r\n  const mousePos = useRef({ x: 0.5, y: 0.5 });\r\n\r\n  useEffect(() => {\r\n    if (!ctnDom.current) return;\r\n    const ctn = ctnDom.current;\r\n    const renderer = new Renderer();\r\n    const gl = renderer.gl;\r\n    gl.clearColor(1, 1, 1, 1);\r\n\r\n    let program;\r\n\r\n    function resize() {\r\n      const scale = 1;\r\n      renderer.setSize(ctn.offsetWidth * scale, ctn.offsetHeight * scale);\r\n      if (program) {\r\n        program.uniforms.uResolution.value = new Color(\r\n          gl.canvas.width,\r\n          gl.canvas.height,\r\n          gl.canvas.width / gl.canvas.height\r\n        );\r\n      }\r\n    }\r\n\r\n    window.addEventListener('resize', resize, false);\r\n    resize();\r\n\r\n    const geometry = new Triangle(gl);\r\n    program = new Program(gl, {\r\n      vertex: vertexShader,\r\n      fragment: fragmentShader,\r\n      uniforms: {\r\n        uTime: { value: 0 },\r\n        uColor: { value: new Color(...color) },\r\n        uResolution: {\r\n          value: new Color(gl.canvas.width, gl.canvas.height, gl.canvas.width / gl.canvas.height)\r\n        },\r\n        uMouse: { value: new Float32Array([mousePos.current.x, mousePos.current.y]) },\r\n        uAmplitude: { value: amplitude },\r\n        uSpeed: { value: speed }\r\n      }\r\n    });\r\n\r\n    const mesh = new Mesh(gl, { geometry, program });\r\n\r\n    let animateId;\r\n    function update(t) {\r\n      animateId = requestAnimationFrame(update);\r\n      program.uniforms.uTime.value = t * 0.001;\r\n      renderer.render({ scene: mesh });\r\n    }\r\n\r\n    animateId = requestAnimationFrame(update);\r\n    ctn.appendChild(gl.canvas);\r\n\r\n    function handleMouseMove(e) {\r\n      const rect = ctn.getBoundingClientRect();\r\n      const x = (e.clientX - rect.left) / rect.width;\r\n      const y = 1.0 - (e.clientY - rect.top) / rect.height;\r\n      mousePos.current = { x, y };\r\n      program.uniforms.uMouse.value[0] = x;\r\n      program.uniforms.uMouse.value[1] = y;\r\n    }\r\n\r\n    if (mouseReact) {\r\n      ctn.addEventListener('mousemove', handleMouseMove);\r\n    }\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animateId);\r\n      window.removeEventListener('resize', resize);\r\n      if (mouseReact) {\r\n        ctn.removeEventListener('mousemove', handleMouseMove);\r\n      }\r\n      ctn.removeChild(gl.canvas);\r\n      gl.getExtension('WEBGL_lose_context')?.loseContext();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [color, speed, amplitude, mouseReact]);\r\n\r\n  return <div ref={ctnDom} className=\"iridescence-container\" {...rest} />;\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}