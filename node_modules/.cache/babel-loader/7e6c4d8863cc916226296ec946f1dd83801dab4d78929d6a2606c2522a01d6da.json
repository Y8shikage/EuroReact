{"ast":null,"code":"import _objectSpread from\"C:/Users/F1toF/OneDrive/Desktop/cours/cours/cours-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Утилита для управления уведомлениями\n/**\r\n * Создаёт уведомление для пользователя\r\n * @param {string} username - Имя пользователя\r\n * @param {string} type - Тип уведомления: 'approved', 'rejected', 'info'\r\n * @param {string} fileName - Название файла видео\r\n * @param {string} message - Дополнительное сообщение (опционально)\r\n */export const createNotification=function(username,type,fileName){let message=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';const notification={id:Date.now(),username:username,type:type,fileName:fileName,message:message,timestamp:Date.now(),read:false};// Получаем существующие уведомления\nconst savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];// Добавляем новое уведомление\nnotifications.unshift(notification);// Ограничиваем количество уведомлений (максимум 100)\nif(notifications.length>100){notifications.pop();}// Сохраняем\nlocalStorage.setItem('notifications',JSON.stringify(notifications));console.log('Уведомление создано:',notification);return notification;};/**\r\n * Получает уведомления для конкретного пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {Array} Массив уведомлений\r\n */export const getUserNotifications=username=>{const savedNotifications=localStorage.getItem('notifications');const allNotifications=savedNotifications?JSON.parse(savedNotifications):[];// Фильтруем по пользователю\nreturn allNotifications.filter(n=>n.username===username);};/**\r\n * Получает количество непрочитанных уведомлений\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество непрочитанных\r\n */export const getUnreadCount=username=>{const userNotifications=getUserNotifications(username);return userNotifications.filter(n=>!n.read).length;};/**\r\n * Отмечает уведомление как прочитанное\r\n * @param {number} notificationId - ID уведомления\r\n */export const markAsRead=notificationId=>{const savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];const updatedNotifications=notifications.map(n=>{if(n.id===notificationId){return _objectSpread(_objectSpread({},n),{},{read:true});}return n;});localStorage.setItem('notifications',JSON.stringify(updatedNotifications));};/**\r\n * Отмечает все уведомления пользователя как прочитанные\r\n * @param {string} username - Имя пользователя\r\n */export const markAllAsRead=username=>{const savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];const updatedNotifications=notifications.map(n=>{if(n.username===username){return _objectSpread(_objectSpread({},n),{},{read:true});}return n;});localStorage.setItem('notifications',JSON.stringify(updatedNotifications));};/**\r\n * Удаляет уведомление\r\n * @param {number} notificationId - ID уведомления\r\n */export const deleteNotification=notificationId=>{const savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];const updatedNotifications=notifications.filter(n=>n.id!==notificationId);localStorage.setItem('notifications',JSON.stringify(updatedNotifications));};/**\r\n * Удаляет все прочитанные уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество удалённых уведомлений\r\n */export const deleteAllReadNotifications=username=>{const savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];// Считаем сколько прочитанных уведомлений будет удалено\nconst readCount=notifications.filter(n=>n.username===username&&n.read).length;// Удаляем все прочитанные уведомления пользователя\nconst updatedNotifications=notifications.filter(n=>{// Оставляем уведомления других пользователей и непрочитанные уведомления текущего пользователя\nreturn n.username!==username||!n.read;});localStorage.setItem('notifications',JSON.stringify(updatedNotifications));return readCount;};/**\r\n * Очищает все уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n */export const clearUserNotifications=username=>{const savedNotifications=localStorage.getItem('notifications');const notifications=savedNotifications?JSON.parse(savedNotifications):[];const updatedNotifications=notifications.filter(n=>n.username!==username);localStorage.setItem('notifications',JSON.stringify(updatedNotifications));};/**\r\n * Создаёт уведомление об одобрении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n */export const notifyVideoApproved=(username,fileName)=>{return createNotification(username,'approved',fileName,'Ваше видео успешно прошло проверку администратора!');};/**\r\n * Создаёт уведомление об отклонении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n * @param {string} reason - Причина отклонения\r\n */export const notifyVideoRejected=function(username,fileName){let reason=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';const message=reason?\"\\u0412\\u0430\\u0448\\u0435 \\u0432\\u0438\\u0434\\u0435\\u043E \\u043D\\u0435 \\u043F\\u0440\\u043E\\u0448\\u043B\\u043E \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0443. \\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430: \".concat(reason):'Ваше видео не прошло проверку администратора.';return createNotification(username,'rejected',fileName,message);};/**\r\n * Создаёт информационное уведомление\r\n * @param {string} username - Имя пользователя\r\n * @param {string} title - Заголовок\r\n * @param {string} message - Сообщение\r\n */export const notifyInfo=(username,title,message)=>{return createNotification(username,'info',title,message);};","map":{"version":3,"names":["createNotification","username","type","fileName","message","arguments","length","undefined","notification","id","Date","now","timestamp","read","savedNotifications","localStorage","getItem","notifications","JSON","parse","unshift","pop","setItem","stringify","console","log","getUserNotifications","allNotifications","filter","n","getUnreadCount","userNotifications","markAsRead","notificationId","updatedNotifications","map","_objectSpread","markAllAsRead","deleteNotification","deleteAllReadNotifications","readCount","clearUserNotifications","notifyVideoApproved","notifyVideoRejected","reason","concat","notifyInfo","title"],"sources":["C:/Users/F1toF/OneDrive/Desktop/cours/cours/cours-project/src/utils/notificationManager.js"],"sourcesContent":["// Утилита для управления уведомлениями\r\n\r\n/**\r\n * Создаёт уведомление для пользователя\r\n * @param {string} username - Имя пользователя\r\n * @param {string} type - Тип уведомления: 'approved', 'rejected', 'info'\r\n * @param {string} fileName - Название файла видео\r\n * @param {string} message - Дополнительное сообщение (опционально)\r\n */\r\nexport const createNotification = (username, type, fileName, message = '') => {\r\n  const notification = {\r\n    id: Date.now(),\r\n    username: username,\r\n    type: type,\r\n    fileName: fileName,\r\n    message: message,\r\n    timestamp: Date.now(),\r\n    read: false\r\n  };\r\n\r\n  // Получаем существующие уведомления\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Добавляем новое уведомление\r\n  notifications.unshift(notification);\r\n\r\n  // Ограничиваем количество уведомлений (максимум 100)\r\n  if (notifications.length > 100) {\r\n    notifications.pop();\r\n  }\r\n\r\n  // Сохраняем\r\n  localStorage.setItem('notifications', JSON.stringify(notifications));\r\n\r\n  console.log('Уведомление создано:', notification);\r\n  return notification;\r\n};\r\n\r\n/**\r\n * Получает уведомления для конкретного пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {Array} Массив уведомлений\r\n */\r\nexport const getUserNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const allNotifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Фильтруем по пользователю\r\n  return allNotifications.filter(n => n.username === username);\r\n};\r\n\r\n/**\r\n * Получает количество непрочитанных уведомлений\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество непрочитанных\r\n */\r\nexport const getUnreadCount = (username) => {\r\n  const userNotifications = getUserNotifications(username);\r\n  return userNotifications.filter(n => !n.read).length;\r\n};\r\n\r\n/**\r\n * Отмечает уведомление как прочитанное\r\n * @param {number} notificationId - ID уведомления\r\n */\r\nexport const markAsRead = (notificationId) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.map(n => {\r\n    if (n.id === notificationId) {\r\n      return { ...n, read: true };\r\n    }\r\n    return n;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Отмечает все уведомления пользователя как прочитанные\r\n * @param {string} username - Имя пользователя\r\n */\r\nexport const markAllAsRead = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.map(n => {\r\n    if (n.username === username) {\r\n      return { ...n, read: true };\r\n    }\r\n    return n;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Удаляет уведомление\r\n * @param {number} notificationId - ID уведомления\r\n */\r\nexport const deleteNotification = (notificationId) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.filter(n => n.id !== notificationId);\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Удаляет все прочитанные уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n * @returns {number} Количество удалённых уведомлений\r\n */\r\nexport const deleteAllReadNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  // Считаем сколько прочитанных уведомлений будет удалено\r\n  const readCount = notifications.filter(n => n.username === username && n.read).length;\r\n\r\n  // Удаляем все прочитанные уведомления пользователя\r\n  const updatedNotifications = notifications.filter(n => {\r\n    // Оставляем уведомления других пользователей и непрочитанные уведомления текущего пользователя\r\n    return n.username !== username || !n.read;\r\n  });\r\n\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n  return readCount;\r\n};\r\n\r\n/**\r\n * Очищает все уведомления пользователя\r\n * @param {string} username - Имя пользователя\r\n */\r\nexport const clearUserNotifications = (username) => {\r\n  const savedNotifications = localStorage.getItem('notifications');\r\n  const notifications = savedNotifications ? JSON.parse(savedNotifications) : [];\r\n\r\n  const updatedNotifications = notifications.filter(n => n.username !== username);\r\n  localStorage.setItem('notifications', JSON.stringify(updatedNotifications));\r\n};\r\n\r\n/**\r\n * Создаёт уведомление об одобрении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n */\r\nexport const notifyVideoApproved = (username, fileName) => {\r\n  return createNotification(\r\n    username,\r\n    'approved',\r\n    fileName,\r\n    'Ваше видео успешно прошло проверку администратора!'\r\n  );\r\n};\r\n\r\n/**\r\n * Создаёт уведомление об отклонении видео администратором\r\n * @param {string} username - Имя пользователя\r\n * @param {string} fileName - Название файла\r\n * @param {string} reason - Причина отклонения\r\n */\r\nexport const notifyVideoRejected = (username, fileName, reason = '') => {\r\n  const message = reason \r\n    ? `Ваше видео не прошло проверку. Причина: ${reason}`\r\n    : 'Ваше видео не прошло проверку администратора.';\r\n  \r\n  return createNotification(\r\n    username,\r\n    'rejected',\r\n    fileName,\r\n    message\r\n  );\r\n};\r\n\r\n/**\r\n * Создаёт информационное уведомление\r\n * @param {string} username - Имя пользователя\r\n * @param {string} title - Заголовок\r\n * @param {string} message - Сообщение\r\n */\r\nexport const notifyInfo = (username, title, message) => {\r\n  return createNotification(\r\n    username,\r\n    'info',\r\n    title,\r\n    message\r\n  );\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}